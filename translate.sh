#!/bin/bash

str="$( xclip -o | grep -o '.')"
en="$(echo $str | grep -i '[a-z]')"
if [ "$en" != "" ]; then
    declare -A lettersArray=(
        ['q']="й" ['Q']="Й"    ['a']="ф" ['A']="Ф"    ['z']="я" ['Z']="Я"    ['`']="ё" ['~']="Ё"
        ['w']="ц" ['W']="Ц"    ['s']="ы" ['S']="Ы"    ['x']="ч" ['X']="Ч"    ['@']='"'
        ['e']="у" ['E']="У"    ['d']="в" ['D']="В"    ['c']="с" ['C']="С"    ['#']="№"
        ['r']="к" ['R']="К"    ['f']="а" ['F']="А"    ['v']="м" ['V']="М"    ['$']=";"
        ['t']="е" ['T']="Е"    ['g']="п" ['G']="П"    ['b']="и" ['B']="И"    ['^']=":"
        ['y']="н" ['Y']="Н"    ['h']="р" ['H']="Р"    ['n']="т" ['N']="Т"    ['&']="?"
        ['u']="г" ['U']="Г"    ['j']="о" ['J']="О"    ['m']="ь" ['M']="Ь"    ['?']=","
        ['i']="ш" ['I']="Ш"    ['k']="л" ['K']="Л"    [',']="б" ['<']="Б"    ['/']="."
        ['o']="щ" ['O']="Щ"    ['l']="д" ['L']="Д"    ['.']="ю" ['>']="Ю"
        ['p']="з" ['P']="З"    [';']="ж" [":"]="Ж"    ['/']="." ['?']=","
        ['[']="х" ['{']="Х"    ["'"]="э" ['"']="Э"
        [']']="ъ" ['}']="Ъ"
    )
else
    declare -A lettersArray=(
        ['й']="q" ['Й']="Q"    ['ф']="a" ['Ф']="A"    ['я']="z" ['Я']="Z"    ['ё']='`' ['~']='~'
        ['ц']="w" ['Ц']="W"    ['ы']="s" ['Ы']="S"    ['ч']="x" ['Ч']="X"    ['"']='@'
        ['у']="e" ['У']="E"    ['в']="d" ['В']="D"    ['с']="c" ['С']="C"    ['№']="#"
        ['к']="r" ['К']="R"    ['а']="f" ['А']="F"    ['м']="v" ['М']="V"    [';']="$"
        ['е']="t" ['Е']="T"    ['п']="g" ['П']="G"    ['и']="b" ['И']="B"    [':']="^"
        ['н']="y" ['Н']="Y"    ['р']="h" ['Р']="H"    ['т']="n" ['Т']="N"    ['?']="&"
        ['г']="u" ['Г']="U"    ['о']="j" ['О']="J"    ['ь']="m" ['Ь']="M"    [',']="?"
        ['ш']="i" ['Ш']="I"    ['л']="k" ['Л']="K"    ['б']="," ['Б']="<"    ['.']="/"
        ['щ']="o" ['Щ']="O"    ['д']="l" ['Д']="L"    ['ю']="." ['Ю']=">"
        ['з']="p" ['З']="P"    ['ж']=";" ["Ж"]=":"    ['.']="/" [',']="?"
        ['х']="[" ['Х']="{"    ["э"]="'" ['Э']='"'
        ['ъ']="]" ['Ъ']="}"
    )
fi

letters=""

readarray -t words <<<"$str"
for letter in "${words[@]}"; do
    if [ "${lettersArray[$letter]}" = "" ] || [ "$letter" = " " ]; then
        letters="$letters""$letter"
    else
        letters="$letters${lettersArray[$letter]}"
    fi
done

printf "$letters" | xclip -selection clipboard;
xdotool key "ctrl+v"

